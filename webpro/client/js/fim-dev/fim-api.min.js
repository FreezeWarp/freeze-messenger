var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var a=0;return $jscomp.iteratorPrototype(function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,a){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var c=0,d={next:function(){if(c<b.length){var e=c++;return{value:a(e,b[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.prototype.entries",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(a,b){return[a,b]})}},"es6","es3");
var fimApi=function(){this.requestDefaults={close:!1,timerId:1,refresh:-1,timeout:5E3,cache:!1,begin:function(){},error:function(){},exception:function(){},each:function(){},reverseEach:!1,end:function(){},async:!0,action:null,autoId:!1};this.timers={};this.done=function(b,a){return function(c){var d=c[a?a:Object.keys(c)[0]];b.begin(d);b.reverseEach&&(d=d.reverse());$.each(d,function(a,c){b.each(c)});b.end(d,c.metadata)}};this.fail=function(b,a){return function(c){"responseJSON"in c||(c.responseJSON=
JSON.parse(c.responseText));if("exception"in c.responseJSON)if("The access token provided has expired"==c.responseJSON.exception.details)$.cookie("webpro_username")?standard.login({username:$.cookie("webpro_username"),password:$.cookie("webpro_username"),finish:a}):(standard.logout(),dia.error("Your login has expired. Please login again."));else return b.exception(c.responseJSON.exception);else return b.error(c)}};this.timer=function(b,a,c){b.close?(console.log("close "+a+"_"+b.timerId,fimApi.timers),
clearInterval(fimApi.timers[a+"_"+b.timerId]),delete fimApi.timers[a+"_"+b.timerId]):(c(b),-1<b.refresh&&(clearInterval(fimApi.timers[a+"_"+b.timerId]),fimApi.timers[a+"_"+b.timerId]=setInterval(function(){c(b)},b.refresh)))};this.registerDefaultExceptionHandler=function(b){this.requestDefaults.exception=b};this.getDefaultExceptionHandler=function(){return this.requestDefaults.exception}};
fimApi.prototype.login=function(b,a){b=fimApi.mergeDefaults(b,{grant_type:"password",username:null,password:null,access_token:null,refresh_token:null,client_id:""});a=fimApi.mergeDefaults(a,fimApi.requestDefaults);return $.ajax({url:directory+"validate.php",type:"POST",data:b,timeout:a.timeout,cache:a.cache}).done(function(b){a.end(b.login)}).fail(function(b){a.error(b.responseJSON.exception)})};
fimApi.prototype.getUsers=function(b,a){b=fimApi.mergeDefaults(b,{info:["self","groups","profile"],access_token:window.sessionHash,id:null,userIds:null,userNames:null,userNameSearch:null});a=fimApi.mergeDefaults(a,fimApi.requestDefaults);(function(){$.ajax({type:"get",url:directory+"api/user.php",data:b,timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.getUsers(b,a)}))})()};
fimApi.prototype.createUser=function(b,a){a=fimApi.mergeDefaults(a,fimApi.requestDefaults);return $.ajax({type:"post",url:directory+"api/user.php",data:fimApi.mergeDefaults(b,{name:null,password:null,birthDate:null,email:null}),timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.getUsers(b,a)}))};
fimApi.prototype.getRooms=function(b,a){b=fimApi.mergeDefaults(b,{access_token:window.sessionHash,id:null,roomIds:null,roomNames:null,roomNameSearch:null,permLevel:null,page:null});a=fimApi.mergeDefaults(a,fimApi.requestDefaults);(function(){$.ajax({type:"get",url:directory+"api/room.php",data:b,timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.getRooms(b,a)}))})()};
fimApi.prototype.getEventsFallback=function(b,a){a=fimApi.mergeDefaults(a,fimApi.requestDefaults);fimApi.timer(a,"getEventsFallback",function(a){$.ajax({type:"get",url:directory+"stream.php",data:fimApi.mergeDefaults(b,{fallback:!0,access_token:window.sessionHash,streamType:null,queryId:null,lastEvent:null,lastMessage:null}),timeout:a.timeout,cache:a.cache}).done(function(b){fimApi.done(a)(b)}).fail(function(c){a.refresh&&fimApi.getEventsFallback(null,{close:!0});fimApi.fail(a,function(){fimApi.getEventsFallback(b,
a)})(c)})})};
fimApi.prototype.getMessages=function(b,a){a=fimApi.mergeDefaults(a,fimApi.requestDefaults);fimApi.timer(a,"getMessages",function(a){$.ajax({type:"get",url:directory+"api/message.php",data:fimApi.mergeDefaults(b,{access_token:window.sessionHash,roomId:null,userIds:null,messageIdEnd:null,messageIdStart:null,page:null,messageTextSearch:null,archive:a.autoId?window.requestSettings[b.roomId].firstRequest:!1}),timeout:a.timeout,cache:a.cache}).done(function(b){fimApi.done(a)(b)}).fail(function(c){a.refresh&&fimApi.getMessages(null,
{close:!0});fimApi.fail(a,function(){fimApi.getMessages(b,a)})(c)})})};fimApi.prototype.sendMessage=function(b,a,c){a=fimApi.mergeDefaults(a,{access_token:window.sessionHash,ignoreBlock:!1,message:null,flag:null});c=fimApi.mergeDefaults(c,fimApi.requestDefaults);$.ajax({url:directory+"api/message.php?"+$.param({roomId:b}),type:"POST",data:a,timeout:c.timeout,cache:c.cache}).done(fimApi.done(c)).fail(fimApi.fail(c,function(){fimApi.sendMessage(b,a,c)}))};
fimApi.prototype.editMessage=function(b,a,c,d){c=fimApi.mergeDefaults(c,{ignoreBlock:!1,message:null,flag:null});d=fimApi.mergeDefaults(d,fimApi.requestDefaults);$.ajax({url:directory+"api/message.php?"+$.param({_action:"edit",access_token:window.sessionHash,id:a,roomId:b}),type:"POST",data:c,timeout:d.timeout,cache:d.cache}).done(fimApi.done(d)).fail(fimApi.fail(d,function(){fimApi.editMessage(b,a,c,d)}))};
fimApi.prototype.deleteMessage=function(b,a,c){c=fimApi.mergeDefaults(c,fimApi.requestDefaults);$.ajax({url:directory+"api/message.php?"+$.param({_action:"delete",access_token:window.sessionHash,id:a,roomId:b}),type:"POST",timeout:c.timeout,cache:c.cache}).done(fimApi.done(c)).fail(fimApi.fail(c,function(){fimApi.deleteMessage(b,a,c)}))};
fimApi.prototype.getUnreadMessages=function(b,a){a=fimApi.mergeDefaults(a,fimApi.mergeDefaults({timeout:3E4,refresh:3E4},fimApi.requestDefaults));fimApi.timer(a,"getUnreadMessages",function(a){$.ajax({type:"get",url:directory+"api/unreadMessages.php",data:fimApi.mergeDefaults(b,{access_token:window.sessionHash}),timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(function(c){a.refresh&&fimApi.getUnreadMessages(null,{close:!0});fimApi.fail(a,function(){fimApi.getUnreadMessages(b,a)})(c)})})};
fimApi.prototype.getFiles=function(b,a){b=fimApi.mergeDefaults(b,{access_token:window.sessionHash,userIds:"",fileIds:""});a=fimApi.mergeDefaults(a,fimApi.requestDefaults);a.close&&clearInterval(fimApi.timers["getFiles_"+a.timerId]);(function(){$.ajax({type:"get",url:directory+"api/files.php",data:b,timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.getFiles(b.requestSettings)}))})()};
fimApi.prototype.getStats=function(b,a){a=fimApi.mergeDefaults(a,fimApi.requestDefaults);$.ajax({type:"get",url:directory+"api/stats.php",data:fimApi.mergeDefaults(b,{access_token:window.sessionHash,roomId:null,number:10}),timeout:a.timeout,cache:a.cache}).done(fimApi.done(a,"roomStats")).fail(fimApi.fail(a,function(){fimApi.getStats(b,a)}))};
fimApi.prototype.getKicks=function(b,a){a=fimApi.mergeDefaults(a,fimApi.requestDefaults);(function(){$.ajax({type:"get",url:directory+"api/kick.php",data:fimApi.mergeDefaults(b,{access_token:window.sessionHash,roomId:null,userId:null}),timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.getKicks(b,a)}))})()};
fimApi.prototype.getCensorLists=function(b,a){b=fimApi.mergeDefaults(b,{access_token:window.sessionHash,roomId:null,listIds:null,includeWords:1});a=fimApi.mergeDefaults(a,fimApi.requestDefaults);(function(){$.ajax({type:"get",url:directory+"api/getCensorLists.php",data:b,timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.getCensorLists(b,a)}))})()};
fimApi.prototype.getActiveUsers=function(b,a){a=fimApi.mergeDefaults(a,fimApi.requestDefaults);fimApi.timer(a,"getActiveUsers",function(a){$.ajax({type:"get",url:directory+"api/userStatus.php",data:fimApi.mergeDefaults(b,{access_token:window.sessionHash,roomIds:null,userIds:null,onlineThreshold:null}),timeout:a.timeout,cache:a.cache}).done(fimApi.done(a,"users")).fail(function(c){a.refresh&&fimApi.getActiveUsers(null,{close:!0});fimApi.fail(a,function(){fimApi.getActiveUsers(b,a)})(c)})})};
fimApi.prototype.getGroups=function(b,a){a=fimApi.mergeDefaults(a,fimApi.requestDefaults);$.ajax({type:"get",url:directory+"api/group.php",data:fimApi.mergeDefaults(b,{access_token:window.sessionHash,groupIds:null,groupNames:null,groupNameSearch:null}),timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.getGroups(b,a)}))};
fimApi.prototype.acHelper=function(b){return function(a,c){$.ajax({type:"get",url:directory+"api/acHelper.php",data:{access_token:window.sessionHash,list:b,search:a.term},success:function(a){c($.map(a.entries,function(a,b){return{label:a,value:b}}))}})}};
fimApi.prototype.kickUser=function(b,a,c,d){d=fimApi.mergeDefaults(d,fimApi.requestDefaults);$.ajax({url:directory+"api/kick.php?"+$.param({access_token:window.sessionHash,roomId:a,userId:b}),type:"POST",data:{length:c},timeout:d.timeout,cache:d.cache}).done(fimApi.done(d)).fail(fimApi.fail(d,function(){fimApi.kickUser(b,a,c,d)}))};
fimApi.prototype.unkickUser=function(b,a,c){c=fimApi.mergeDefaults(c,fimApi.requestDefaults);$.ajax({url:directory+"api/kick.php?"+$.param({access_token:window.sessionHash,_action:"delete",roomId:a,userId:b}),type:"POST",timeout:c.timeout,cache:c.cache}).done(fimApi.done(c)).fail(fimApi.fail(c,function(){fimApi.unkickUser(b,a,c)}))};
fimApi.prototype.markMessageRead=function(b,a){var c={access_token:window.sessionHash,roomId:b};a=fimApi.mergeDefaults(a,fimApi.requestDefaults);$.ajax({url:directory+"api/markMessageRead.php",type:"POST",data:c,timeout:a.timeout,cache:a.cache}).done(fimApi.done(a)).fail(fimApi.fail(a,function(){fimApi.markMessageRead(b,a)}))};
fimApi.prototype.editUserOptions=function(b,a,c){a=fimApi.mergeDefaults(a,{defaultFormatting:null,defaultColor:null,defaultHighlight:null,defaultRoomId:null,watchRooms:null,favRooms:null,ignoreList:null,friendsList:null,profile:null,defaultFontface:null,parentalAge:null,parentalFlags:null,avatar:null,privacyLevel:null});c=fimApi.mergeDefaults(c,fimApi.requestDefaults);$.ajax({url:directory+"api/userOptions.php?"+$.param({access_token:window.sessionHash,_action:b?b:"edit"}),type:"POST",data:a,timeout:c.timeout,
cache:c.cache}).done(fimApi.done(c)).fail(fimApi.fail(c,function(){fimApi.editUserOptions(b,a,c)}))};fimApi.prototype.favRoom=function(b){this.editUserOptions("create",{favRooms:[b]})};fimApi.prototype.unfavRoom=function(b){this.editUserOptions("delete",{favRooms:[b]})};fimApi.prototype.watchRoom=function(b){this.editUserOptions("create",{watchRooms:[b]})};fimApi.prototype.unwatchRoom=function(b){this.editUserOptions("delete",{watchRooms:[b]})};
fimApi.prototype.editRoom=function(b,a,c,d){c=fimApi.mergeDefaults(c,{access_token:window.sessionHash,name:null,defaultPermissions:null,userPermissions:null,groupPermissions:null,censorLists:null,parentalAge:null,parentalFlags:null,hidden:null,official:null});d=fimApi.mergeDefaults(d,fimApi.requestDefaults);$.ajax({url:directory+"api/room.php?"+$.param({id:b,_action:a}),method:"POST",data:c,timeout:d.timeout,cache:d.cache}).done(fimApi.done(d)).fail(fimApi.fail(d,function(){fimApi.editRoom(b,c,d)}))};
fimApi.prototype.createRoom=function(b,a){fimApi.editRoom(null,"create",b,a)};fimApi.prototype.deleteRoom=function(b,a){fimApi.editRoom(b,"delete",{},a)};fimApi.prototype.undeleteRoom=function(b,a){fimApi.editRoom(b,"undelete",{},a)};fimApi.prototype.editRoomPermissionUser=function(b,a,c){var d={};d["*"+a]=c;fimApi.editRoom(b,"edit",{userPermissions:d})};fimApi.prototype.editRoomPermissionGroup=function(b,a,c){var d={};d["*"+a]=c;fimApi.editRoom(b,"edit",{groupPermissions:d})};
fimApi.prototype.editUserStatus=function(b,a,c){a=fimApi.mergeDefaults(a,{status:null,typing:null});c=fimApi.mergeDefaults(c,fimApi.requestDefaults);$.ajax({url:directory+"api/userStatus.php?"+$.param({_action:"edit",access_token:window.sessionHash,roomIds:[b]}),type:"POST",data:a,timeout:c.timeout,cache:c.cache}).done(fimApi.done(c)).fail(fimApi.fail(c,function(){fimApi.editUserStatus(b,a,c)}))};fimApi.prototype.ping=function(b,a){this.editUserStatus(b,{},a)};
fimApi.prototype.changeAvatar=function(b,a){this.editUserOptions({avatarHash:b},a)};fimApi.prototype.mergeDefaults=function(b,a){var c={},d;for(d in b){if(!(d in a))throw"Invalid data in object call: "+d;null!==b[d]&&void 0!==b[d]&&(c[d]=b[d])}for(d in a)d in c||null===a[d]||(c[d]=a[d]);return c};fimApi.prototype.jsonify=function(b,a){b=void 0===b?{}:Object.create(b);for(var c in a)a[c]in b&&(b[a[c]]=JSON.stringify(b[a[c]]));return b};
